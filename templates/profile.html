{% extends "base.html" %}
{% block content %}
<section class="hero-section">
  <div class="overlay" style="background: rgba(255,255,255,0.95); color:#333; max-width: 600px; width:100%; padding:20px; border-radius:10px;">
    
    <h2 style="color:#0d47a1; margin-bottom:20px;">My Profile</h2>
    
    <div class="auth-box" style="background: rgba(255,255,255,0.9); color:#333; margin: 0;">
      <form method="POST" action="{{ url_for('profile') }}">
        
        <div style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 5px; font-weight: bold; color:#0d47a1;">Username</label>
          <input type="text" name="username" value="{{ user['username'] }}" required 
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        
        <div style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 5px; font-weight: bold; color:#0d47a1;">Email</label>
          <input type="email" name="email" value="{{ user['email'] }}" required 
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        
        <div style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 5px; font-weight: bold; color:#0d47a1;">Full Name</label>
          <input type="text" name="full_name" value="{{ user['full_name'] or '' }}" 
                 placeholder="Enter your full name"
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        
        <div style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 5px; font-weight: bold; color:#0d47a1;">Contact Number</label>
          <input type="text" name="contact" value="{{ user['contact'] or '' }}" 
                 placeholder="Enter your contact number"
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        
        <div style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 5px; font-weight: bold; color:#0d47a1;">Birthdate (YYYY-MM-DD)</label>
          <input type="text" name="birthdate" value="{{ user['birthdate'] or '' }}" 
                 placeholder="YYYY-MM-DD"
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        
        <div style="margin-bottom: 25px;">
          <label style="display: block; margin-bottom: 5px; font-weight: bold; color:#0d47a1;">Location</label>
          <input type="text" name="location" value="{{ user['location'] or '' }}" 
                 placeholder="Enter your location"
                 style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
        </div>

        <div style="margin-bottom: 25px; padding: 15px; background-color: #f5f5f5; border-radius: 5px;">
          <h4 style="color:#0d47a1; margin-bottom: 15px;">Change Password (Optional)</h4>
          <div style="margin-bottom: 10px;">
            <input type="password" name="new_password" placeholder="New Password (leave blank to keep current)" 
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
          </div>
          <small style="color: #666;">Leave password fields blank if you don't want to change your password.</small>
        </div>
        
        <button type="submit" class="btn-primary" style="width: 100%;">Update Profile</button>
      </form>
      
      <!-- Separate Password Change Form -->
      <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;">
        <h4 style="color:#0d47a1; margin-bottom: 15px;">Change Password Only</h4>
        <form method="POST" action="{{ url_for('change_password') }}">
          <div style="margin-bottom: 10px;">
            <input type="password" name="current_password" placeholder="Current Password" required 
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
          </div>
          <div style="margin-bottom: 10px;">
            <input type="password" name="new_password" placeholder="New Password" required 
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
          </div>
          <div style="margin-bottom: 15px;">
            <input type="password" name="confirm_password" placeholder="Confirm New Password" required 
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
          </div>
          <button type="submit" class="btn-primary" style="width: 100%; background-color: #546e7a;">Change Password</button>
        </form>
      </div>
      
    </div>
    
    <div style="margin-top: 20px; text-align: center;">
      <a href="{{ url_for('dashboard') }}" class="btn-primary" style="background-color: #546e7a;">Back to Dashboard</a>
    </div>

  </div>
</section>

<style>
.auth-box input:focus {
    border-color: #0d47a1 !important;
    outline: none;
    box-shadow: 0 0 5px rgba(13, 71, 161, 0.3);
}

.auth-box label {
    color: #0d47a1;
}
</style>
{% endblock %}