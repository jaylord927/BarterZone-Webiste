{% extends "base.html" %}
{% block content %}
<section class="hero-section">
  <div class="overlay" style="background: rgba(255,255,255,0.95); color:#333; max-width: 800px; width:100%; padding:30px; border-radius:12px; box-shadow: 0 8px 25px rgba(13, 71, 161, 0.1);">

    <div style="text-align: center; margin-bottom: 30px;">
      <h2 style="color:#0d47a1; margin-bottom:10px; font-size: 28px;">My Messages</h2>
      <p style="color:#666; font-size: 16px;">Your conversations with other traders</p>
    </div>

    {% if chat_partners %}
    <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 25px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #0d47a1;">
      <h3 style="color:#0d47a1; margin-top:0; margin-bottom:20px; display: flex; align-items: center; gap: 10px;">
        <span style="font-size: 24px;">💬</span>
        Active Conversations
      </h3>

      <div style="max-height: 400px; overflow-y: auto; padding-right: 10px;">
        {% for partner in chat_partners %}
        <div class="conversation-card" style="background: white; border: 2px solid #e0e0e0; padding: 20px; margin-bottom: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s ease;">
          <div style="display: flex; align-items: center; gap: 15px;">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #0d47a1 0%, #1976d2 100%); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 18px;">
              {{ (partner['full_name'] or partner['username'])|first|upper }}
            </div>
            <div>
              <h4 style="margin: 0 0 5px 0; color:#0d47a1; font-size: 18px;">{{ partner['full_name'] or partner['username'] }}</h4>
              <p style="margin: 0; color:#666; font-size: 14px;">@{{ partner['username'] }}</p>
            </div>
          </div>
          <a href="{{ url_for('chat', partner_id=partner['partner_id']) }}"
             class="btn-primary"
             style="padding: 10px 20px; background: linear-gradient(135deg, #0d47a1 0%, #1976d2 100%); color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: bold; cursor: pointer; text-decoration: none; transition: all 0.3s ease;">
            💬 Open Chat
          </a>
        </div>
        {% endfor %}
      </div>
    </div>
    {% else %}
    <div style="text-align: center; padding: 50px 30px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px; border: 2px dashed #0d47a1;">
      <div style="font-size: 64px; margin-bottom: 20px;">💬</div>
      <h3 style="color:#666; margin-bottom:15px;">No Messages Yet</h3>
      <p style="color:#999; margin-bottom:25px; max-width: 400px; margin-left: auto; margin-right: auto;">
        You haven't started any conversations yet. Send a message to another trader to get started!
      </p>
      <a href="{{ url_for('send_message') }}" class="btn-primary" style="padding: 12px 25px; background: linear-gradient(135deg, #0d47a1 0%, #1976d2 100%); color: white; border: none; border-radius: 8px; text-decoration: none; font-weight: bold;">
        📤 Send Your First Message
      </a>
    </div>
    {% endif %}

    <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
      <a href="{{ url_for('send_message') }}" class="btn-primary" style="padding: 12px 25px; background: linear-gradient(135deg, #0d47a1 0%, #1976d2 100%); color: white; border: none; border-radius: 8px; font-weight: bold; font-size: 16px; cursor: pointer; transition: all 0.3s ease; text-decoration: none;">
        📤 Send New Message
      </a>
      <a href="{{ url_for('dashboard') }}" class="btn-primary" style="padding: 12px 25px; background: linear-gradient(135deg, #546e7a 0%, #78909c 100%); color: white; border: none; border-radius: 8px; font-weight: bold; font-size: 16px; cursor: pointer; transition: all 0.3s ease; text-decoration: none;">
        🏠 Back to Dashboard
      </a>
    </div>

  </div>
</section>

<script>
// Add hover effects
document.addEventListener('DOMContentLoaded', function() {
    const conversationCards = document.querySelectorAll('.conversation-card');
    conversationCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 6px 20px rgba(13, 71, 161, 0.15)';
            this.style.borderColor = '#0d47a1';
            this.style.background = 'linear-gradient(135deg, #f8f9fa 0%, #e3f2fd 100%)';
        });
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = 'none';
            this.style.borderColor = '#e0e0e0';
            this.style.background = 'white';
        });
    });
});
</script>

<style>
.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}
</style>
{% endblock %}